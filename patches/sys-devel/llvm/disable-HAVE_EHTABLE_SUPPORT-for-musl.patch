diff -Nuar llvm-3.8.1.src.orig/lib/ExecutionEngine/RuntimeDyld/RTDyldMemoryManager.cpp llvm-3.8.1.src/lib/ExecutionEngine/RuntimeDyld/RTDyldMemoryManager.cpp
--- llvm-3.8.1.src.orig/lib/ExecutionEngine/RuntimeDyld/RTDyldMemoryManager.cpp	2015-08-05 04:51:17.000000000 +0100
+++ llvm-3.8.1.src/lib/ExecutionEngine/RuntimeDyld/RTDyldMemoryManager.cpp	2016-08-11 06:53:26.266555431 +0100
@@ -33,7 +33,7 @@
 RTDyldMemoryManager::~RTDyldMemoryManager() {}
 
 // Determine whether we can register EH tables.
-#if (defined(__GNUC__) && !defined(__ARM_EABI__) && !defined(__ia64__) && \
+#if (defined(__GNUC__) && (defined(__GLIBC__) || defined(__UCLIBC__)) && !defined(__ARM_EABI__) && !defined(__ia64__) && \
      !defined(__SEH__) && !defined(__USING_SJLJ_EXCEPTIONS__))
 #define HAVE_EHTABLE_SUPPORT 1
 #else
